---
const faqs = [
  {
    question: "¿NOSE QUE PONER?",
    answer: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Magni provident consequuntur dolorum similique aperiam expedita totam repellat, explicabo a sit fuga hic, optio, ut vero? Quae illum quod voluptatum possimus?",
    isOpen: true
  },
  {
    question: "¿NOSE QUE PONER?",
    answer: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Magni provident consequuntur dolorum similique aperiam expedita totam repellat, explicabo a sit fuga hic, optio, ut vero? Quae illum quod voluptatum possimus?",

    isOpen: false
  },
  {
    question: "¿NOSE QUE PONER?",
    answer: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Magni provident consequuntur dolorum similique aperiam expedita totam repellat, explicabo a sit fuga hic, optio, ut vero? Quae illum quod voluptatum possimus?",

    isOpen: false
  },
  {
    question: "¿NOSE QUE PONER?",
    answer: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Magni provident consequuntur dolorum similique aperiam expedita totam repellat, explicabo a sit fuga hic, optio, ut vero? Quae illum quod voluptatum possimus?",

    isOpen: false
  },
  {
    question: "¿NOSE QUE PONER?",
    answer: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Magni provident consequuntur dolorum similique aperiam expedita totam repellat, explicabo a sit fuga hic, optio, ut vero? Quae illum quod voluptatum possimus?",
    isOpen: false
  },
  {
    question: "¿NOSE QUE PONER?",
    answer: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Magni provident consequuntur dolorum similique aperiam expedita totam repellat, explicabo a sit fuga hic, optio, ut vero? Quae illum quod voluptatum possimus?",
    isOpen: false
  },
  {
    question: "¿NOSE QUE PONER?",
    answer: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Magni provident consequuntur dolorum similique aperiam expedita totam repellat, explicabo a sit fuga hic, optio, ut vero? Quae illum quod voluptatum possimus?",
    isOpen: false
  }
];
---

<div class="min-h-screen bg-gray-200 py-20 flex items-center">
  <div class="max-w-4xl mx-auto px-6 w-full">
    <div class="text-center mb-16">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight">
        Aún tienes preguntas? Nosotros tenemos las<br>Respuestas.
      </h1>
      <!--
      <p class="text-lg text-gray-700 max-w-xl mx-auto leading-relaxed">
        Este texto no se si debería ir así que lo dejo comentado.
      </p> -->
    </div>
    <div class="space-y-6">
      {faqs.map((faq, index) => (
        <div class="faq-item" data-faq-item>
          <!-- Pregunta en globo - gris por defecto, negro cuando está activa -->
          <div class="flex justify-start mb-6">
            <button 
              class={`px-5 py-3 rounded-full text-left transition-all duration-300 shadow-lg inline-flex items-center gap-3 ${
                index === 0 
                  ? 'bg-slate-800 text-white hover:bg-slate-700' 
                  : 'bg-slate-400 text-white hover:bg-slate-500'
              }`}
              data-faq-button
            >
              <span class="font-medium text-sm">{faq.question}</span>
              <div class={`w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 ${
                index === 0 ? 'bg-slate-600' : 'bg-slate-300'
              }`}>
                <svg 
                  class={`w-3 h-3 text-white transition-transform duration-300 ${index === 0 ? 'rotate-45' : ''}`}
                  data-faq-icon
                  fill="none" 
                  stroke="currentColor" 
                  viewBox="0 0 24 24"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                </svg>
              </div>
            </button>
          </div>
          
          <div 
            class={`transition-all duration-500 ease-out  overflow-hidden ${index === 0 ? 'max-h-96 opacity-100 mb-8' : 'max-h-0 opacity-0'}`}
            data-faq-content
          >
            <div class="flex justify-end pr-8">
              <div class="relative max-w-lg">
                <!-- Globo de respuesta -->
                <div class="bg-white px-6 py-4 rounded-3xl shadow-lg border border-gray-100">
                  <p class="text-gray-700 text-sm leading-relaxed">{faq.answer}</p>
                </div>
                <!-- Revisar no se como hacer que parezca un globo ed texto como el del figma -->
                <div class="absolute -bottom-1 right-3">
                  <div class="w-6 h-6 bg-white transform rotate-45"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const faqItems = document.querySelectorAll('[data-faq-item]');
    
    faqItems.forEach((item, itemIndex) => {
      const button = item.querySelector('[data-faq-button]');
      const content = item.querySelector('[data-faq-content]');
      const icon = item.querySelector('[data-faq-icon]');
      const iconContainer = button?.querySelector('div');

      
      button?.addEventListener('click', () => {
        const isOpen = content?.classList.contains('max-h-96');
        
        faqItems.forEach((otherItem) => {
                const otherButton = otherItem.querySelector('[data-faq-button]');
                const otherContent = otherItem.querySelector('[data-faq-content]');
                const otherIcon = otherItem.querySelector('[data-faq-icon]');
                const otherIconContainer = otherButton?.querySelector('div');

                otherContent?.classList.remove('max-h-96', 'opacity-100', 'mb-8');
                otherContent?.classList.add('max-h-0', 'opacity-0');

                otherIcon?.classList.remove('rotate-45');

                otherButton?.classList.remove('bg-slate-800', 'hover:bg-slate-700');
                otherButton?.classList.add('bg-slate-400', 'hover:bg-slate-500');


                otherIconContainer?.classList.remove('bg-slate-600');
                otherIconContainer?.classList.add('bg-slate-300');
            });


        if (!isOpen) {
          content?.classList.remove('max-h-0', 'opacity-0');
          content?.classList.add('max-h-96', 'opacity-100', 'mb-8');

          icon?.classList.add('rotate-45');

          button?.classList.remove('bg-slate-400', 'hover:bg-slate-500');
          button?.classList.add('bg-slate-800', 'hover:bg-slate-700');
          iconContainer?.classList.remove('bg-slate-300');
          iconContainer?.classList.add('bg-slate-600');
        }
      });
    });
  });
</script>